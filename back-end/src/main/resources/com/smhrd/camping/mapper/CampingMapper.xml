<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

  <mapper namespace="com.smhrd.camping.mapper.CampingMapper">
  	<!-- <insert id="write" parameterType="com.smhrd.camping.domain.Comunity">
  		insert into TB_STORY(STORY_CATEGORY,STORY_TITLE,STORY_CONTENT,STORY_IMG,USER_EMAIL)
		values('기본',#{story_title},#{story_content},#{story_img},#{story_writer})
  		</insert>
  		
		values(#{story_category},#{story_title},#{story_content},#{story_img},#{user_email})
  	</insert> -->
  	
  	<!-- 게시판 업로드 생성 -->
  	<insert id="write" parameterType="com.smhrd.camping.domain.Comunity">
		insert into TB_STORY(STORY_CATEGORY, STORY_TITLE, STORY_CONTENT, STORY_IMG, USER_EMAIL)
		values( #{story_category}, #{story_title}, #{story_content}, #{story_img}, #{user_email})
	</insert>
	
  		

  	
  	<select id="CategoryStep" resultType="com.smhrd.camping.domain.Category">
  		select * from TB_CATEGORY
  	</select>
  <!-- ComunityList, ComunityOne -->	
  	<select id="ComunityList" resultType="com.smhrd.camping.domain.Comunity">
  		select * from TB_Story
  	</select>
  	
  	<select id="ComunityOne" resultType="com.smhrd.camping.domain.Comunity">
  		select * from TB_Story where story_idx=#{story_idx}
  	</select>
  	
  	<insert id="comment" parameterType="com.smhrd.camping.domain.Comment">
  		 <!-- INSERT INTO TB_COMMENT (CMT_IDX, STORY_IDX, CMT_CONTENT, CMT_DT, USER_EMAIL)
        VALUES (NEXTVAL('CMT_IDX_SEQ'), #{story_idx}, #{cmt_content}, SYSDATE, #{user_email}) -->
        insert into tb_comment (cmt_idx, story_idx, cmt_content, cmt_dt, user_email)
        values(1, #{story_idx}, #{cmt_content}, SYSDATE, #{user_email})
  	</insert>
  	
  	<select id="CommentList" resultType="com.smhrd.camping.domain.Comment">
  		select * from tb_comment
  	</select>
  	
  	<select id="searchComunity" resultType="com.smhrd.camping.domain.Comunity">
  		select story_title, story_img from tb_story where story_title like concat('%',#{search},'%')
  	</select>
  	
  </mapper>